# 简介

这是一个为大模型提供 A 股数据的的 MCP(Model Content Protocol) 服务。

目前股票数据为大模型提供以下的数据

- 基本信息：包括股票名称，所属板块等
- 行情数据：当前的行情，以及相关可供参考的历史统计
- 财务数据：近年的公司主要财务数据
- 技术指标：若干常用技术指标

这些数据，被划分成三个工具

- brief: 给定股票的基本信息，行情数据
- medium: 提供所有基本数据和一些财务数据
- full: 提供所有中等数据和技术指标
  由大模型根据用户的问题需要，自行选择调用。

## 运行
1. 本地运行后，mcp地址为：`http://localhost:8686/cnstock/mcp`
```
 python3 main.py --transport http
```
2. MCP debug
```
npx @modelcontextprotocol/inspector --url http://localhost:8686/cnstock/mcp
```

## 免责申明

本项目会尽可能的保障准确可用, 但不对因此产生的任何后果负任何责任, 使用本 MCP 即代表接受此免责申明.

# 使用方法

由于股票的数据比较庞大，所以我们提供了一个公开的服务地址, 查看 [tests/test.sh](tests/test.sh) 文件，里面有一些测试用例以及相关的使用方法。

然后需要一个 MCP 客户端来连接这个服务，下面是一些常用的 MCP 客户端的配置方法。

## 重要更新 2025-11-22

更新 MCP 协议为 `streamable-http`, 测试服务地址变更为

`http://82.156.17.205/cnstock/mcp`

## CherryStudio

[CherryStudio](https://github.com/CherryHQ/cherry-studio) 是一个支持 MCP 的客户端，提供了用户友好的界面和丰富的功能。

### 配置

配置路径为

> 左侧栏 -> 设置 -> MCP 设置 -> 添加服务器

在弹出的对话框中, 参考下图填入相关的信息

然后启用即可

![cherrystudio](docs/cherrystudio.jpg)

### 使用

![cherrystudio-use](docs/cherrystudio-use.jpg)

## DeepChat

[DeepChat](https://github.com/ThinkInAIXYZ/deepchat) 是一个支持 MCP 的客户端，提供了用户友好的界面和丰富的功能。

### 配置

配置路径为

> 左侧栏 -> 设置 -> MCP 服务器 -> 添加服务器

在弹出的对话框中, 参考下图填入相关的信息

然后启用即可

![deepchat](docs/deepchat.jpg)

### 使用

![](docs/deepchat-use.jpg)

# 使用案例

## 盘面分析

### 系统题词

```
你是一个专业的投资顾问，请根据用户的输入，推断出股票代码，然后调用相关的工具，进行走势分析。
请在分析时标明当前的数据日期
你应该应用你的金融学知识，着重对数据进行专业解读。
```

### 用户输入

```
浦发银行
```

### 模型回复

```markdown
好的，我将为您分析浦发银行的股票走势。浦发银行的股票代码为 **SH600000**（上海证券交易所上市）。我将调用相关工具获取最新的数据并进行分析。

# 浦发银行 (SH600000) 股票走势分析

**数据日期：2025 年 5 月 6 日**

以下是对浦发银行 (SH600000) 的详细分析，基于提供的最新数据，结合金融学知识，从基本面、交易数据、技术指标等多个角度进行解读。

---

## 1. 基本面分析

- **行业概念**：浦发银行属于信托概念、证金持股、跨境支付(CIPS) 和高股息精选等概念板块。这些标签表明其在金融领域具有多元化业务布局，尤其是在高股息领域，可能对追求稳定收益的投资者具有吸引力。
- **市盈率 (PE)**：4.90，处于较低水平，表明股票估值相对较低，可能被市场低估，但也可能反映市场对其未来增长预期的悲观。
- **市净率 (PB)**：0.33，远低于 1，表明股价低于每股净资产，可能是价值投资的机会，但也可能反映资产质量或盈利能力问题。
- **净资产收益率 (ROE)**：2.65%，相对较低，显示公司资本利用效率不高，盈利能力有待提升。

### 财务数据趋势

从过去五年的财务数据来看：

- **主营收入**：2020 年至 2022 年呈下降趋势，2023 年略有回升，但 2024 年再次小幅下降至 1707.48 亿元，显示业务增长乏力。
- **净利润**：2020 年至 2022 年持续下降，2023 年有所回升至 367.02 亿元，2024 年进一步增长至 452.57 亿元，表明盈利能力正在逐步恢复。
- **每股收益 (EPS)** 和 **每股净资产 (NAV)**：EPS 从 2020 年的 1.88 元下降至 2023 年的 1.07 元，2024 年回升至 1.36 元；NAV 持续增长，2024 年达到 22.36 元，显示公司资产积累能力较强。
- **净资产收益率 (ROE)**：从 2020 年的 10.46%下降至 2023 年的 5.10%，2024 年小幅回升至 6.08%，反映出盈利效率仍未恢复到前期水平。

**基本面总结**：浦发银行目前估值较低，具有一定的价值投资潜力，但盈利能力和业务增长面临挑战。净利润的回升是一个积极信号，但主营收入的波动和较低的 ROE 表明其长期增长仍需观察。

---

## 2. 交易数据分析

### 价格趋势

- **短期 (5 日)**：均价 10.858 元，最高 11.190 元，最低 10.570 元，累计涨跌幅+5.48%，显示短期内股价有较强的上涨动能。
- **中期 (20 日)**：均价 10.510 元，累计涨跌幅+6.58%，价格波动范围较大（最高 11.190 元，最低 9.460 元），表明中期趋势向上，但波动性较高。
- **长期 (240 日)**：均价 9.468 元，累计涨跌幅+43.21%，显示长期趋势非常强劲，股价从低点 7.760 元上涨至当前水平，反映市场对该股的信心逐步增强。

### 成交量与换手率

- **成交量**：当日成交量 97.26 万手，显著高于 5 日均量（67.21 万手）和 20 日均量（69.60 万手），表明近期市场参与度增加，资金流入明显。
- **换手率**：当日换手率 0.33%，5 日总换手率 1.14%，20 日总换手率 4.74%，显示短期交易活跃度较高，但长期来看换手率较低（240 日均换手 0.17%），投资者多以持有为主。

### 振幅

- **短期 (5 日)**：振幅 5.87%，显示短期波动较为温和。
- **长期 (240 日)**：振幅 44.20%，表明长期内价格波动较大，投资者需关注风险。

**交易数据总结**：浦发银行近期价格呈上涨趋势，尤其是短期和中期动能较强，成交量放大显示资金关注度提升。然而，长期振幅较大，投资者需警惕价格回调风险。

---

## 3. 技术指标分析

### KDJ 指标

- 最新数据 (2025-05-06)：K=86.38，D=81.30，J=96.54，处于高位，显示股价短期内处于超买状态，可能面临回调压力。
- 趋势：过去 30 日 KDJ 指标整体呈上升趋势，J 值多次超过 100，反映市场情绪较为乐观，但需警惕超买风险。

### MACD 指标

- 最新数据：DIF=0.16，DEA=0.10，DIFF>DEA，且 DIFF 持续扩大，显示多头动能增强，短期趋势仍为看涨。
- 趋势：过去 30 日 MACD 指标从负值转为正值，表明股价从弱势转为强势，目前仍处于多头排列。

### RSI 指标

- 最新数据：RSI(6)=77.85，RSI(12)=67.60，RSI(24)=61.28，其中 RSI(6)处于超买区域（>70），短期可能有调整需求。
- 趋势：RSI 指标整体处于 50 以上，显示市场处于强势，但短期超买信号需关注。

### 布林带 (BBands)

- 最新数据：上轨 11.26 元，中轨 10.86 元，下轨 10.47 元，当前股价 11.17 元接近上轨，显示价格处于高位，短期可能面临阻力。
- 趋势：布林带近期持续走宽，表明波动性增加，股价突破中轨后持续靠近上轨，显示多头力量占优。

**技术指标总结**：多项指标显示浦发银行短期处于超买状态，KDJ 和 RSI 均提示回调风险，但 MACD 和布林带仍显示多头趋势，短期内上涨动能可能延续，建议投资者关注回调后的买入机会。

---

## 4. 综合分析与投资建议

### 优点

1. **低估值**：市盈率和市净率均处于较低水平，具有一定的价值投资吸引力。
2. **长期趋势向上**：240 日涨跌幅高达 43.21%，显示长期市场信心较强。
3. **短期动能强劲**：5 日和 20 日涨跌幅分别为 5.48%和 6.58%，成交量放大，资金流入明显。
4. **财务改善**：净利润和每股收益在 2024 年有所回升，显示盈利能力逐步恢复。

### 风险

1. **盈利效率低**：净资产收益率较低，业务增长乏力，主营收入波动较大。
2. **短期超买**：技术指标显示股价处于超买状态，短期可能面临回调压力。
3. **波动性高**：长期振幅较大，投资者需关注市场波动风险。

### 投资建议

- **短期投资者**：当前股价处于高位，技术指标显示超买，建议观望，等待回调至布林带中轨（10.86 元）附近或更低水平再考虑介入。
- **中长期投资者**：考虑到低估值和长期上涨趋势，可在回调时分批建仓，关注 10.50-10.80 元支撑位，同时设置止损位以控制风险。
- **风险控制**：建议关注后续成交量是否持续放大，若成交量萎缩且股价跌破 10.47 元（布林带下轨），需警惕进一步下行风险。

**总结**：浦发银行目前具有一定的投资价值，但短期超买风险需警惕。投资者应结合自身风险承受能力和投资周期，合理制定操作策略。
```

## 数据解读

### 系统题词

无需

### 用户输入

```
浦发银行最近波动大吗？
```

### 模型回复

```markdown
为了分析浦发银行的近期波动情况，我将推断其股票代码并调用相关工具获取数据。浦发银行的股票代码为 **SH600000**（上海证券交易所上市）。我将使用 `brief` 函数来获取基本的交易数据，以便初步判断其波动情况。如果需要更详细的分析，我会进一步调用其他工具。

# 浦发银行 (SH600000) 近期波动分析

**数据日期：2025 年 5 月 6 日**

## 1. 价格波动分析

- **当日波动**：浦发银行当日价格波动幅度为 **5.57%**，价格在 **10.80 元至 11.19 元** 之间波动，收盘价为 **11.17 元**，较前一日上涨 **1.92%**。
- **短期波动（5 日）**：过去 5 日的价格波动幅度为 **5.87%**，价格区间为 **10.57 元至 11.19 元**，均价为 **10.858 元**，累计涨幅为 **5.48%**。短期内波动相对温和，但有一定的上涨动能。
- **中期波动（20 日）**：过去 20 日的价格波动幅度较大，为 **18.29%**，价格区间为 **9.46 元至 11.19 元**，均价为 **10.51 元**，累计涨幅为 **6.58%**。中期波动显示出较强的价格回升趋势。
- **长期波动（240 日）**：过去 240 日的价格波动幅度非常显著，为 **44.20%**，价格区间为 **7.76 元至 11.19 元**，均价为 **9.468 元**，累计涨幅高达 **43.21%**。长期来看，浦发银行股价呈现出较强的上涨趋势。

## 2. 成交量与换手率分析

- **当日成交量**：当日成交量为 **97.26 万手**，显著高于 5 日均量（**67.21 万手**）和 20 日均量（**69.60 万手**），显示出市场参与度在当日有所提升。
- **换手率**：当日换手率为 **0.33%**，高于 5 日均换手率（**0.23%**）和 20 日均换手率（**0.24%**）。虽然整体换手率不高，但短期内市场活跃度有所增加。

## 3. 估值指标分析

- **市盈率 (PE)**：当前为 **4.90**，处于较低水平，表明股票估值相对较低，可能存在低估空间。
- **市净率 (PB)**：当前为 **0.33**，远低于 1，显示市场对公司净资产的估值较低，可能是价值投资的潜在标的。
- **净资产收益率 (ROE)**：当前为 **2.65%**，表明公司盈利能力一般，需关注其未来的盈利改善情况。

## 4. 综合解读与投资建议

从价格波动来看，浦发银行近期（尤其是过去 5 日和 20 日）股价呈现出一定的上涨趋势，但波动幅度在短期内相对可控（5 日振幅 5.87%），并未表现出剧烈波动。中长期来看（240 日振幅 44.20%），股价经历了较大的上涨，显示出较强的趋势性行情。

成交量和换手率的提升表明市场对浦发银行的关注度有所增加，尤其是当日成交量的显著放大，可能预示着短期内仍有上涨动能。然而，换手率整体偏低，市场流动性一般，需警惕可能的成交量萎缩风险。

从估值角度看，浦发银行的市盈率和市净率均处于较低水平，显示出一定的价值投资吸引力，但较低的净资产收益率提示其盈利能力有待提升，投资者需关注其后续财报数据及行业环境变化。

**总结**：浦发银行近期波动幅度在短期内并不算大，但中长期趋势显示出较强的上涨动能。结合低估值特性，短期内可适当关注，但需警惕成交量变化及盈利能力的潜在风险。建议投资者密切关注行业政策（如高股息政策、跨境支付概念等）对股价的进一步催化作用。

如果您需要更详细的财务数据或技术分析指标，可以进一步调用“medium”或“full”工具进行深入分析。
```

# QA 常见问题

## 使用股票 MCP 服务是否需要付费

该服务目前限时免费体验，未来请关注项目主页 https://github.com/elsejj/mcp-cn-a-stock 的更新。

## 如何私有部署

私有部署需替换本项目使用的数据源为你自有的数据, 参见[相关的讨论](https://github.com/elsejj/mcp-cn-a-stock/issues/1)

## 缺少某些标的数据

目前主要覆盖沪深主板 A 股, 其他的暂无计划.

## 调用频率, 限流等

正常使用不会有限制, 因为模型调取工具分析需要的时间远大于 MCP 返回时间, 批量轮询数据则可能会被限流.

## 准确性, 可用性等

会尽可能保障准确可用, 但不对因此导致的任何结果负任何责任, 同时由于大模型幻觉, 知识面, 理解力的因素, 请使用者仔细甄别它的回复结果是否可靠.

## 联系方式

请在 https://github.com/elsejj/mcp-cn-a-stock/issues 发起问题或向 cs@kanhq.com 发送邮件，谢谢。
